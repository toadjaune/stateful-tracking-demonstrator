<h1> List of tracking methods </h1>

<p>
  Here you can see a list of the tracking methods, and which ones allowed us to track your browser.<br/>
  Please note that to prevent any enumeration of user email addresses, we do not display them, we only say whether it is the currently logged in user or not.
</p>

<table>
  <tr>
    <th> Tracking method </th>
    <th> Does this track someone ? </th>
    <% if user_signed_in? %>
      <th> Is it you ? </th>
    <% end %>
    <th> Set at : </th>
    <th> See more details </th>
  </tr>
  <% @methods.each do |key,method| %>
    <tr>
      <td> <%= method[:name] %> </td>
      <td> <%= method[:worked] %> </td>
      <% if user_signed_in? %>
        <td> <%= method[:correct] %> </td>
      <% end %>
      <td> <time><%= method[:created_at] %></time> </td>
      <td> <%= link_to('FAQ', faq_path + method[:shortname], method: :get) %> </td>
    </tr>
  <% end %>
</table>
<script>
for(let o of document.getElementsByTagName("time")) { if(o.innerText) {d = new Date(o.innerText.replace(" UTC",""));o.innerText = d.toLocaleDateString() + " " + d.toLocaleTimeString()}}
</script>
<%= button_to('Back', root_path, method: :get) %>
